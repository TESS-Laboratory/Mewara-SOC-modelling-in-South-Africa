library(readxl)
library(dplyr)
library(ggplot2)
library(tidyr)
# Load SOC field samples excel into dataframe
# Remove duplicates
# Plot no. of samples per year
# Plot Carbon distribution
# Plot Bulk density distribution
soc_data <- read_excel('C:/swati/Mewara-SOC-modelling-in-South-Africa/SOC Data from Heidi 20230124 - cleaned_additional.xlsx')
soc_data <- soc_data %>% distinct()
soc_data$C[soc_data$C == 'NA'] <- NA
soc_data$BD[soc_data$BD == 'NA'] <- NA
missing_C_count <- sum(is.na(soc_data$C))
missing_C_count
missing_BD_count <- sum(is.na(soc_data$BD))
missing_BD_count
################################################################################
soc_data_yearly <- soc_data %>%
mutate(year = format(date, '%Y')) %>%
group_by(year) %>%
summarise(count = n())
yearly_samples <- ggplot(soc_data_yearly, aes(x=year, y = count)) +
geom_bar(stat = 'identity', fill = 'skyblue') +
labs(title = 'Number of samples per year',
x = 'Year',
y = 'No. of Samples') +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))
yearly_samples
################################################################################
# Plot for Soil Organic Carbon (SOC)
carbon_dist <- ggplot(soc_data, aes(x = C)) +
geom_histogram(fill = "skyblue", color = "black", bins = 100) +
labs(
title = "Distribution of Soil Organic Carbon (SOC)",
x = "Soil Organic Carbon (% by mass)",
y = "Frequency"
) +
scale_x_continuous(
breaks = seq(0, 20, by = 0.5),
limits = c(0, 20)
) +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))
carbon_dist
################################################################################
soc_data$BD <- as.numeric(as.character(soc_data$BD))
# Plot for Soil Organic Carbon (SOC)
bd_dist <- ggplot(soc_data, aes(x = BD)) +
geom_histogram(fill = "skyblue", color = "black", bins = 50) +
labs(
title = "Distribution of Soil Bulk Density",
x = "Bulk Density (kg/m3)",
y = "Frequency"
) +
scale_x_continuous(
breaks = seq(0, 5, by = 0.2),
limits = c(0, 5)
) +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))
bd_dist
################################################################################
# Install and load the required packages
install.packages("ows4R")  # Install ows4R if not already installed
install.packages("raster") # Install raster package if not already installed
library(ows4R)
library(raster)
# Define the SoilGrids WCS URL
wcs_url <- "https://maps.isric.org/mapserv?map=/map/wcs/soilgrids.map"
# Create a WCS client
wcs_client <- WCSClient$new(url = wcs_url, serviceVersion = "2.0.1")
install.packages("ows4R")  # Install ows4R if not already installed
install.packages("raster") # Install raster package if not already installed
library(ows4R)
library(raster)
# Define the SoilGrids WCS URL
wcs_url <- "https://maps.isric.org/mapserv?map=/map/bdod.map"
# Create a WCS client
wcs_client <- WCSClient$new(url = wcs_url, serviceVersion = "2.0.0")
library(ows4R)
library(raster)
# Define the SoilGrids WCS URL
wcs_url <- "https://maps.isric.org/mapserv?map=/map/bdod.map"
# Create a WCS client
wcs_client <- WCSClient$new(url = wcs_url, serviceVersion = "2.0.0")
library(ows4R)
library(raster)
# Define the SoilGrids WCS URL
wcs_url <- "https://maps.isric.org/mapserv?map=/map/bdod.map"
# Create a WCS client
wcs_client <- WCSClient$new(url = wcs_url, serviceVersion = "2.0.0")
library(XML)
library(rgdal)
install.packages('rgdal')
install.packages('gdalUtils')
library(readxl)
library(dplyr)
library(ggplot2)
library(tidyr)
# Load SOC field samples excel into dataframe
# Remove duplicates
# Plot no. of samples per year
# Plot Carbon distribution
# Plot Bulk density distribution
soc_data <- read_excel('C:/swati/Mewara-SOC-modelling-in-South-Africa/SOC Data from Heidi 20230124 - cleaned_additional.xlsx')
soc_data <- soc_data %>% distinct()
soc_data$C[soc_data$C == 'NA'] <- NA
soc_data$BD[soc_data$BD == 'NA'] <- NA
missing_C_count <- sum(is.na(soc_data$C))
missing_C_count
missing_BD_count <- sum(is.na(soc_data$BD))
missing_BD_count
################################################################################
soc_data_yearly <- soc_data %>%
mutate(year = format(date, '%Y')) %>%
group_by(year) %>%
summarise(count = n())
yearly_samples <- ggplot(soc_data_yearly, aes(x=year, y = count)) +
geom_bar(stat = 'identity', fill = 'skyblue') +
labs(title = 'Number of samples per year',
x = 'Year',
y = 'No. of Samples') +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))
yearly_samples
################################################################################
# Plot for Soil Organic Carbon (SOC)
carbon_dist <- ggplot(soc_data, aes(x = C)) +
geom_histogram(fill = "skyblue", color = "black", bins = 100) +
labs(
title = "Distribution of Soil Organic Carbon (SOC)",
x = "Soil Organic Carbon (% by mass)",
y = "Frequency"
) +
scale_x_continuous(
breaks = seq(0, 20, by = 0.5),
limits = c(0, 20)
) +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))
carbon_dist
################################################################################
soc_data$BD <- as.numeric(as.character(soc_data$BD))
# Plot for Soil Organic Carbon (SOC)
bd_dist <- ggplot(soc_data, aes(x = BD)) +
geom_histogram(fill = "skyblue", color = "black", bins = 50) +
labs(
title = "Distribution of Soil Bulk Density",
x = "Bulk Density (kg/m3)",
y = "Frequency"
) +
scale_x_continuous(
breaks = seq(0, 5, by = 0.2),
limits = c(0, 5)
) +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))
bd_dist
################################################################################
library(readxl)
library(dplyr)
library(ggplot2)
library(tidyr)
# Load SOC field samples excel into dataframe
# Remove duplicates
# Plot no. of samples per year
# Plot Carbon distribution
# Plot Bulk density distribution
soc_data <- read_excel('C:/swati/Mewara-SOC-modelling-in-South-Africa/SOC Data from Heidi 20230124 - cleaned_additional.xlsx')
soc_data <- soc_data %>% distinct()
soc_data$C[soc_data$C == 'NA'] <- NA
soc_data$BD[soc_data$BD == 'NA'] <- NA
missing_C_count <- sum(is.na(soc_data$C))
missing_C_count
missing_BD_count <- sum(is.na(soc_data$BD))
missing_BD_count
################################################################################
soc_data_yearly <- soc_data %>%
mutate(year = format(date, '%Y')) %>%
group_by(year) %>%
summarise(count = n())
yearly_samples <- ggplot(soc_data_yearly, aes(x=year, y = count)) +
geom_bar(stat = 'identity', fill = 'skyblue') +
labs(title = 'Number of samples per year',
x = 'Year',
y = 'No. of Samples') +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))
yearly_samples
################################################################################
# Plot for Soil Organic Carbon (SOC)
carbon_dist <- ggplot(soc_data, aes(x = C)) +
geom_histogram(fill = "skyblue", color = "black", bins = 100) +
labs(
title = "Distribution of Soil Organic Carbon (SOC)",
x = "Soil Organic Carbon (% by mass)",
y = "Frequency"
) +
scale_x_continuous(
breaks = seq(0, 20, by = 0.5),
limits = c(0, 20)
) +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))
carbon_dist
################################################################################
soc_data$BD <- as.numeric(as.character(soc_data$BD))
# Plot for Soil Organic Carbon (SOC)
bd_dist <- ggplot(soc_data, aes(x = BD)) +
geom_histogram(fill = "skyblue", color = "black", bins = 50) +
labs(
title = "Distribution of Soil Bulk Density",
x = "Bulk Density (kg/m3)",
y = "Frequency"
) +
scale_x_continuous(
breaks = seq(0, 5, by = 0.2),
limits = c(0, 5)
) +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))
bd_dist
################################################################################
